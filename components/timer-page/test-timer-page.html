<!DOCTYPE html>
<html lang="tr-TR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer Page Component - Test</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Timer Page Component CSS -->
    <link rel="stylesheet" href="timer-page.css">
    <!-- Generic Card Component CSS -->
    <link rel="stylesheet" href="../genericCard/genericCard.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .test-controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-width: 300px;
        }
        
        .test-controls h5 {
            margin: 0 0 1rem 0;
            color: #2c3e50;
            font-size: 1rem;
        }
        
        .test-controls .btn {
            margin: 0.25rem;
            font-size: 0.8rem;
            padding: 0.375rem 0.75rem;
        }
        
        .theme-selector {
            margin-bottom: 1rem;
        }
        
        .theme-selector select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Test Controls -->
    <div class="test-controls">
        <h5><i class="fas fa-cog"></i> Test Controls</h5>
        
        <div class="theme-selector">
            <label for="theme-select">Theme:</label>
            <select id="theme-select">
                <option value="default">Default</option>
                <option value="dark">Dark</option>
                <option value="custom">Custom (Purple)</option>
            </select>
        </div>
        
        <div class="d-grid gap-2">
            <button class="btn btn-primary btn-sm" onclick="testBasicTimer()">
                <i class="fas fa-play"></i> Basic Timer
            </button>
            <button class="btn btn-success btn-sm" onclick="testMachiningTimer()">
                <i class="fas fa-cog"></i> Machining Timer
            </button>
            <button class="btn btn-info btn-sm" onclick="testCNCTimer()">
                <i class="fas fa-cut"></i> CNC Timer
            </button>
            <button class="btn btn-warning btn-sm" onclick="testCustomTimer()">
                <i class="fas fa-magic"></i> Custom Timer
            </button>
            <button class="btn btn-info btn-sm" onclick="testTimerWithCards()">
                <i class="fas fa-layer-group"></i> Timer with Cards
            </button>
            <button class="btn btn-warning btn-sm" onclick="testMobileCards()">
                <i class="fas fa-mobile-alt"></i> Mobile Cards
            </button>
            <button class="btn btn-secondary btn-sm" onclick="testMinimalTimer()">
                <i class="fas fa-minus"></i> Minimal Timer
            </button>
            <button class="btn btn-danger btn-sm" onclick="clearTimer()">
                <i class="fas fa-trash"></i> Clear
            </button>
        </div>
    </div>

    <!-- Timer Container -->
    <div id="timer-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Timer Page Component -->
    <script type="module">
        import { TimerPage } from './timer-page.js';
        
        let currentTimer = null;
        
        // Theme selector
        document.getElementById('theme-select').addEventListener('change', (e) => {
            const container = document.getElementById('timer-container');
            container.className = '';
            if (e.target.value !== 'default') {
                container.classList.add(`${e.target.value}-theme`);
            }
        });
        
        // Test functions
        window.testBasicTimer = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Basic Timer Test',
                subtitle: 'Simple timer functionality',
                onStart: () => console.log('Timer started'),
                onStop: () => console.log('Timer stopped'),
                onManual: (data) => {
                    console.log('Manual time entry:', data);
                    currentTimer.showMessage('Manuel zaman girişi başarılı!', 'success');
                },
                onComplete: () => {
                    console.log('Task completed');
                    currentTimer.showMessage('Görev tamamlandı!', 'success');
                },
                onFault: (data) => {
                    console.log('Fault reported:', data);
                    currentTimer.showMessage('Arıza bildirimi gönderildi!', 'success');
                }
            });
        };
        
        window.testMachiningTimer = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Talaşlı İmalat - İş Emri #12345',
                subtitle: 'Makine: CNC Torna Tezgahı #01',
                taskDetails: [
                    {
                        icon: 'fas fa-file-alt',
                        label: 'İş Emri',
                        value: '12345'
                    },
                    {
                        icon: 'fas fa-image',
                        label: 'Resim No',
                        value: 'DRW-001'
                    },
                    {
                        icon: 'fas fa-map-marker-alt',
                        label: 'Poz No',
                        value: 'A-01'
                    },
                    {
                        icon: 'fas fa-cubes',
                        label: 'Adet',
                        value: '50'
                    }
                ],
                onStart: () => console.log('Machining timer started'),
                onStop: () => console.log('Machining timer stopped'),
                onComplete: () => {
                    currentTimer.showMessage('İmalat işlemi tamamlandı!', 'success');
                },
                onFault: (data) => {
                    currentTimer.showMessage('Arıza bildirimi gönderildi!', 'success');
                }
            });
        };
        
        window.testCNCTimer = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'CNC Kesim - Nesting #N-789',
                subtitle: 'Makine: CNC Plazma Kesim #03',
                taskDetails: [
                    {
                        icon: 'fas fa-layer-group',
                        label: 'Nesting ID',
                        value: 'N-789'
                    },
                    {
                        icon: 'fas fa-cube',
                        label: 'Malzeme',
                        value: 'S235JR'
                    },
                    {
                        icon: 'fas fa-ruler',
                        label: 'Boyutlar',
                        value: '2000x1000mm'
                    },
                    {
                        icon: 'fas fa-ruler-vertical',
                        label: 'Kalınlık',
                        value: '10 mm'
                    },
                    {
                        icon: 'fas fa-cubes',
                        label: 'Parça Sayısı',
                        value: '25',
                        clickable: true,
                        id: 'parts-count',
                        onClick: () => {
                            currentTimer.showMessage('Parça listesi gösteriliyor...', 'info');
                        }
                    },
                    {
                        icon: 'fas fa-paperclip',
                        label: 'Dosya Sayısı',
                        value: '3',
                        clickable: true,
                        id: 'files-count',
                        onClick: () => {
                            currentTimer.showMessage('Dosya listesi gösteriliyor...', 'info');
                        }
                    }
                ],
                onStart: () => console.log('CNC timer started'),
                onStop: () => console.log('CNC timer stopped'),
                onComplete: () => {
                    currentTimer.showMessage('CNC kesim işlemi tamamlandı!', 'success');
                }
            });
        };
        
        window.testCustomTimer = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Custom Timer',
                subtitle: 'Fully customized example',
                timerLabel: 'Custom Timer Label',
                buttons: {
                    startStop: {
                        enabled: true,
                        startText: 'Start Custom',
                        stopText: 'Stop Custom',
                        startIcon: 'fas fa-rocket',
                        stopIcon: 'fas fa-stop-circle'
                    },
                    manual: {
                        enabled: true,
                        text: 'Custom Manual',
                        icon: 'fas fa-edit'
                    },
                    complete: {
                        enabled: true,
                        text: 'Custom Complete',
                        icon: 'fas fa-flag-checkered'
                    },
                    fault: {
                        enabled: false
                    }
                },
                showWarning: true,
                warningMessage: 'This is a custom warning message for demonstration purposes.',
                warningIcon: 'fas fa-info-circle',
                taskDetails: [
                    {
                        icon: 'fas fa-star',
                        label: 'Custom Field 1',
                        value: 'Custom Value 1'
                    },
                    {
                        icon: 'fas fa-heart',
                        label: 'Custom Field 2',
                        value: 'Custom Value 2'
                    }
                ],
                onStart: () => {
                    console.log('Custom timer started');
                    currentTimer.showMessage('Custom timer started!', 'success');
                },
                onStop: () => {
                    console.log('Custom timer stopped');
                    currentTimer.showMessage('Custom timer stopped!', 'info');
                }
            });
        };
        
        window.testTimerWithCards = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Timer with Generic Cards',
                subtitle: 'Demonstrating generic cards integration',
                showGenericCards: true,
                genericCards: [
                    {
                        title: 'Machine Status',
                        subtitle: 'CNC-001 is operational',
                        icon: 'fas fa-cog',
                        iconColor: '#28a745',
                        iconBackground: 'linear-gradient(135deg, #28a745, #20c997)',
                        status: 'Active',
                        statusType: 'success',
                        details: [
                            { icon: 'fas fa-map-marker-alt', label: 'Location:', value: 'Workshop A' },
                            { icon: 'fas fa-calendar', label: 'Last Maintenance:', value: '15.01.2024' },
                            { icon: 'fas fa-user', label: 'Operator:', value: 'Ahmet Yılmaz' }
                        ],
                        buttons: [
                            { 
                                text: 'Details', 
                                icon: 'fas fa-info', 
                                class: 'btn-outline-primary', 
                                onClick: () => currentTimer.showMessage('Machine details clicked!', 'info')
                            }
                        ]
                    },
                    {
                        title: 'Current Task',
                        subtitle: 'TI-2024-001 - Part Manufacturing',
                        icon: 'fas fa-tasks',
                        iconColor: '#007bff',
                        iconBackground: 'linear-gradient(135deg, #007bff, #0056b3)',
                        status: 'In Progress',
                        statusType: 'info',
                        details: [
                            { icon: 'fas fa-file-alt', label: 'Job No:', value: 'TI-2024-001' },
                            { icon: 'fas fa-clock', label: 'Duration:', value: '2h 15m', valueClass: 'duration' },
                            { icon: 'fas fa-cubes', label: 'Quantity:', value: '50 pieces' }
                        ],
                        buttons: [
                            { 
                                text: 'View Progress', 
                                icon: 'fas fa-chart-line', 
                                class: 'btn-outline-success', 
                                onClick: () => currentTimer.showMessage('Progress view clicked!', 'success')
                            }
                        ]
                    },
                    {
                        title: 'Quality Check',
                        subtitle: 'Last inspection results',
                        icon: 'fas fa-check-circle',
                        iconColor: '#28a745',
                        iconBackground: 'linear-gradient(135deg, #28a745, #20c997)',
                        status: 'Passed',
                        statusType: 'success',
                        details: [
                            { icon: 'fas fa-ruler', label: 'Dimensions:', value: 'Within tolerance' },
                            { icon: 'fas fa-eye', label: 'Visual:', value: 'No defects' },
                            { icon: 'fas fa-calendar', label: 'Date:', value: '20.01.2024' }
                        ],
                        buttons: [
                            { 
                                text: 'View Report', 
                                icon: 'fas fa-file-pdf', 
                                class: 'btn-outline-danger', 
                                onClick: () => currentTimer.showMessage('Quality report opened!', 'success')
                            }
                        ]
                    }
                ],
                cardsGridOptions: {
                    columns: 'auto', // Use responsive behavior
                    gap: '1.5rem',
                    className: 'timer-cards-grid',
                    responsive: true // Enable responsive layout
                },
                onStart: () => console.log('Timer with cards started'),
                onStop: () => console.log('Timer with cards stopped')
            });
        };
        
        window.testMobileCards = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Mobile-Optimized Cards',
                subtitle: 'Designed for mobile devices',
                showGenericCards: true,
                genericCards: [
                    {
                        title: 'Quick Status',
                        subtitle: 'Machine running',
                        icon: 'fas fa-play-circle',
                        iconColor: '#28a745',
                        iconBackground: 'linear-gradient(135deg, #28a745, #20c997)',
                        status: 'Active',
                        statusType: 'success',
                        details: [
                            { icon: 'fas fa-clock', label: 'Uptime:', value: '2h 15m' },
                            { icon: 'fas fa-user', label: 'Operator:', value: 'Ahmet' }
                        ],
                        buttons: [
                            { 
                                text: 'Details', 
                                icon: 'fas fa-info', 
                                class: 'btn-outline-primary', 
                                onClick: () => currentTimer.showMessage('Status details!', 'info')
                            }
                        ]
                    },
                    {
                        title: 'Production',
                        subtitle: 'Today\'s output',
                        icon: 'fas fa-chart-bar',
                        iconColor: '#007bff',
                        iconBackground: 'linear-gradient(135deg, #007bff, #0056b3)',
                        status: 'On Track',
                        statusType: 'info',
                        details: [
                            { icon: 'fas fa-cubes', label: 'Completed:', value: '45/50' },
                            { icon: 'fas fa-percentage', label: 'Progress:', value: '90%' }
                        ],
                        buttons: [
                            { 
                                text: 'View', 
                                icon: 'fas fa-eye', 
                                class: 'btn-outline-success', 
                                onClick: () => currentTimer.showMessage('Production view!', 'success')
                            }
                        ]
                    },
                    {
                        title: 'Quality',
                        subtitle: 'Last check',
                        icon: 'fas fa-check-double',
                        iconColor: '#28a745',
                        iconBackground: 'linear-gradient(135deg, #28a745, #20c997)',
                        status: 'Passed',
                        statusType: 'success',
                        details: [
                            { icon: 'fas fa-ruler', label: 'Tolerance:', value: '±0.1mm' },
                            { icon: 'fas fa-calendar', label: 'Time:', value: '14:30' }
                        ]
                    },
                    {
                        title: 'Alerts',
                        subtitle: 'System notifications',
                        icon: 'fas fa-bell',
                        iconColor: '#ffc107',
                        iconBackground: 'linear-gradient(135deg, #ffc107, #e0a800)',
                        status: '2 New',
                        statusType: 'warning',
                        details: [
                            { icon: 'fas fa-exclamation', label: 'Warnings:', value: '1' },
                            { icon: 'fas fa-info', label: 'Info:', value: '1' }
                        ],
                        buttons: [
                            { 
                                text: 'View All', 
                                icon: 'fas fa-list', 
                                class: 'btn-outline-warning', 
                                onClick: () => currentTimer.showMessage('Alerts opened!', 'warning')
                            }
                        ]
                    }
                ],
                cardsGridOptions: {
                    columns: 'auto', // Responsive behavior
                    gap: '1rem',
                    className: 'mobile-optimized-cards',
                    responsive: true
                },
                onStart: () => console.log('Mobile cards timer started'),
                onStop: () => console.log('Mobile cards timer stopped')
            });
        };
        
        window.testMinimalTimer = function() {
            clearTimer();
            
            currentTimer = new TimerPage('timer-container', {
                title: 'Minimal Timer',
                subtitle: 'Only essential features',
                showBackButton: false,
                buttons: {
                    startStop: {
                        enabled: true
                    },
                    manual: {
                        enabled: false
                    },
                    complete: {
                        enabled: false
                    },
                    fault: {
                        enabled: false
                    }
                },
                showTaskDetails: false,
                modals: {
                    manualTime: false,
                    faultReport: false,
                    machineStatus: false,
                    redirectWarning: false
                },
                onStart: () => console.log('Minimal timer started'),
                onStop: () => console.log('Minimal timer stopped')
            });
        };
        
        window.clearTimer = function() {
            if (currentTimer) {
                currentTimer.destroy();
                currentTimer = null;
            }
            document.getElementById('timer-container').innerHTML = '';
        };
        
        // Initialize with basic timer
        window.testBasicTimer();
    </script>
</body>
</html>
